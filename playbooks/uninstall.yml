#----------------------------------------------------------------------------------------------------------------------
# Playbook:
#
# Author: liza.dayoub@elastic.co
#----------------------------------------------------------------------------------------------------------------------
---

- hosts: '{{ uut }}'

  vars_files:

    - "{{ lookup('env','ANSIBLE_GROUP_VARS') }}/auto.yml"

  tasks:

    - include_role:
        name: elasticsearch
      vars:
        ait_role: elasticsearch_shutdown_uninstall_verify
      tags: uninstall_elasticsearch

    - include_role:
        name: kibana
      vars:
        ait_role: kibana_shutdown_uninstall_verify
      tags: uninstall_kibana

    - include_role:
        name: logstash
      vars:
        ait_role: logstash_shutdown_uninstall_verify
      tags: uninstall_logstash

    - include_role:
        name: xpack_elasticsearch
      vars:
        ait_role: xpack_elasticsearch_rmconfig_uninstall_restart_verify
      tags: uninstall_xpack_elasticsearch

    - include_role:
        name: xpack_kibana
      vars:
        ait_role: xpack_kibana_rmconfig_uninstall_restart_verify
      tags: uninstall_xpack_kibana

    - include_role:
        name: xpack_logstash
      vars:
        ait_role: xpack_logstash_rmconfig_uninstall_restart_verify
      tags: uninstall_xpack_logstash
