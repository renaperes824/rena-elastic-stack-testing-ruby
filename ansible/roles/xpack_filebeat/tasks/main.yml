#-----------------------------------------------------------------------------------------------------------------------
# filebeat tasks
#
# Author: liza.dayoub@elastic.co
#-----------------------------------------------------------------------------------------------------------------------
---

# Include task files in group use
- name: Include X-Pack filebeat Group Tasks
  include: '{{ lookup("first_found", xpack_filebeat_task_files) }} ait_args={{ item.args }}'
  with_items: '{{ xpack_filebeat_roles[ait_role] }}'
  when: ait_role is defined and xpack_filebeat_roles[ait_role] is defined

# Include task files for individual use, keep in sync with vars/main.yml
- name: Include X-Pack filebeat Individual Task
  include: '{{ item }}'
  with_first_found:
    - files:
        - '{{ ansible_system | lower }}/{{ ait_action }}.yml'
      skip: true
  when: ait_action is defined
